(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{116:function(e,t,a){e.exports=a(139)},125:function(e,t,a){},139:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"handleDataFromServer",function(){return Y}),a.d(n,"getServerVersion",function(){return Z}),a.d(n,"acquire",function(){return Q}),a.d(n,"pause",function(){return ee}),a.d(n,"resume",function(){return te}),a.d(n,"stop",function(){return ae}),a.d(n,"halt",function(){return ne});var r=a(58),i=a(25),l=function e(t){var a=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;Object(i.a)(this,e),this.send=function(){var e;(e=a.instance).send.apply(e,arguments)},this.close=function(){var e;(e=a.instance).close.apply(e,arguments)},this.onopen=function(){},this.onmessage=function(){},this.onerror=function(){},this.onclose=function(){},this._open=function(){a.instance=new WebSocket(a.url),a.instance.onopen=function(){a.onopen.apply(a,arguments)},a.instance.onmessage=function(){a.onmessage.apply(a,arguments)},a.instance.onclose=function(t){t.code!==e.NORMAL_CLOSURE&&a._reconnect();for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];a.onclose.apply(a,[t].concat(r))},a.instance.onerror=function(){a.onerror.apply(a,arguments)}},this._reconnect=function(){setTimeout(function(){a._open()},a.autoReconnectInterval)},this.url=t,this.autoReconnectInterval=n,this._open()};l.NORMAL_CLOSURE=1e3;var s=new l("ws://".concat(window.location.hostname,":").concat("3142")),o=a(0),c=a.n(o),u=a(10),m=a.n(u),h=(a(125),a(32)),p=a(34),d=a(33),f=a(35),E=a(63),g=a(24),v=a(21),b=a.n(v),C=a(104),w=a(204),y=a(5),O=a(217),S=a(205),k=a(206),j=a(60),N=a(196),x=a(99),T=a.n(x),D=a(214),F=a(100),I=a.n(F),_=a(207),A=a(192),z=a(143),q=a(208),P=a(209),R=a(102),B=a.n(R),L=a(103),X=a.n(L),G=a(101),J=a.n(G),M=a(105),V=a(213),W=a(189),U=a(193),$=a(212),H=a(82),K=function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).setNumber=function(e){var t=0;e.forEach(function(e){t+=Math.pow(2,e)}),a.setState({number:t})},a.setFilters=function(e){var t=[],n=e.toString(2);Object(M.a)(n).slice().reverse().forEach(function(e,a){"1"===e&&t.push(a)}),a.setState({filters:t})},a.handleFilterChange=function(e,t){a.setState({filters:t}),a.setNumber(t)},a.handleNumberChange=function(e){var t=parseInt(e.target.value);!0!==isFinite(t)&&(t=0),a.setState({number:t}),a.setFilters(t)},a.handleTransmissionChange=function(e,t){a.setState({transmission:t})},a.handleIncrementFilter=function(e){return function(t){var n=a.state.number;"increase"===e?++n:"decrease"===e&&--n,a.setState({number:n}),a.setFilters(n)}},a.createFilters=function(e,t){for(var a=[],n=0;n<=e-1;n++)a.push(c.a.createElement(W.a,{value:n,key:n},n));return a};var n=parseInt(e.size);return a.state={size:n,filters:[],number:0,transmission:1},a.filterGroup=a.createFilters(a.props.size,a.state.filters),a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement($.a,{label:"Transmission",value:this.state.transmission,onChange:this.handleTransmissionChange}),c.a.createElement(U.a,{onClick:this.handleIncrementFilter("decrease")},c.a.createElement(H.a,{icon:"caret-square-left",size:"2x"})),c.a.createElement(V.a,{value:this.state.filters,onChange:this.handleFilterChange},this.filterGroup),c.a.createElement(U.a,{onClick:this.handleIncrementFilter("increase")},c.a.createElement(H.a,{icon:"caret-square-right",size:"2x"})),c.a.createElement($.a,{label:"Number",value:this.state.number,onChange:this.handleNumberChange}))}}]),t}(o.Component),Y=function(e){var t={};return"string"===typeof e&&(t=JSON.parse(e)),t.fromServer=!0,t},Z=function(){return{type:"version"}},Q=function(e,t,a,n,r){return{type:"acquire",data:{filename:e,exp_times:t,num_images:a,delay:n,description:r}}},ee=function(){return{type:"pause"}},te=function(){return{type:"resume"}},ae=function(){return{type:"stop"}},ne=function(){return{type:"halt"}},re=a(211),ie=a(218),le=a(191),se=a(216),oe=a(202),ce=a(98),ue=a.n(ce),me=a(84),he=a.n(me),pe=a(44),de=a.n(pe),fe=a(86),Ee=a.n(fe),ge=a(85),ve=a.n(ge),be=a(203),Ce=a(195),we=a(194),ye=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).handleClose=function(){a.props.onClose(a.state.time)},a.handleChange=function(e){a.setState({time:parseFloat(e.target.value)})},a.state={time:1},a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return c.a.createElement(we.a,{onClose:this.handleClose,open:this.props.open},c.a.createElement(Ce.a,null,"Add custom expsure time"),c.a.createElement($.a,{value:this.state.time,onChange:this.handleChange,type:"number",variant:"outlined",onKeyDown:function(t){"Enter"===t.key&&e.handleClose()}}),c.a.createElement(U.a,{onClick:this.handleClose},"Close"))}}]),t}(o.Component),Oe=Object(y.a)(function(e){return{root:{display:"flex"}}})(ye),Se=a(144),ke=a(198),je=a(201),Ne=a(197),xe=a(199),Te=a(200),De=a(107),Fe=a(215),Ie=a(97),_e=a.n(Ie),Ae=Object(C.a)({palette:{secondary:{main:_e.a[400]}}}),ze=Object(y.a)({track:{backgroundColor:de.a[400]},switchBase:{color:de.a[400]}})(Fe.a),qe=Object(y.a)(function(e){return{head:{backgroundColor:e.palette.common.black,color:e.palette.common.white},body:{fontSize:14}}})(Ne.a),Pe=["None","Sample Table X","Sample Table Y","Sample Table Z","SAXS Detector X"],Re=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).handleSelectChange=function(e){var t=JSON.parse(e.target.name),n=a.state[t.param];n[t.positioner]=e.target.value,a.setState(Object(g.a)({},t.param,n))},a.handleSwitchChange=function(e){var t=JSON.parse(e.target.name),n=a.state[t.param];n[t.positioner]=e.target.checked,a.setState(Object(g.a)({},t.param,n))},a.state={positioner:["",""],type:[!0,!0],absrel:[!0,!0]},a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.classes;return c.a.createElement(De.a,{className:e.root},c.a.createElement(ke.a,{className:e.table},c.a.createElement(xe.a,null,c.a.createElement(Te.a,null,c.a.createElement(qe,null,"Parameter"),c.a.createElement(qe,{align:"right"},"Positioner 1"),c.a.createElement(qe,{align:"right"},"Positioner 2"))),c.a.createElement(je.a,null,c.a.createElement(Te.a,{className:e.row,key:1},c.a.createElement(qe,{component:"th",scope:"row"},"Positioner"),c.a.createElement(qe,{align:"right"},c.a.createElement(re.a,{value:this.state.positioner[0],onChange:this.handleSelectChange,name:'{"param": "positioner", "positioner": 0}',className:e.selectEmpty},Pe.map(function(e){return c.a.createElement(oe.a,{value:"Sample Table X"},e)}))),c.a.createElement(qe,{align:"right"},c.a.createElement(re.a,{value:this.state.positioner[1],onChange:this.handleSelectChange,name:'{"param": "positioner", "positioner": 1}',className:e.selectEmpty},Pe.map(function(e){return c.a.createElement(oe.a,{value:"Sample Table X"},e)})))),c.a.createElement(Te.a,{className:e.row,key:2},c.a.createElement(qe,{component:"th",scope:"row"},"Type"),c.a.createElement(qe,{align:"right"},c.a.createElement("div",{className:e.horizontal},c.a.createElement(j.a,null,"Linear"),c.a.createElement(Se.a,{theme:Ae},c.a.createElement(ze,{checked:this.state.type[0],onChange:this.handleSwitchChange,name:'{"param": "type", "positioner": 0}'})),c.a.createElement(j.a,null,"Table"))),c.a.createElement(qe,{align:"right"},c.a.createElement("div",{className:e.horizontal},c.a.createElement(j.a,null,"Linear"),c.a.createElement(Se.a,{theme:Ae},c.a.createElement(ze,{checked:this.state.type[1],onChange:this.handleSwitchChange,name:'{"param": "type", "positioner": 1}'})),c.a.createElement(j.a,null,"Table")))),c.a.createElement(Te.a,{className:e.row,key:3},c.a.createElement(qe,{component:"th",scope:"row"},"Absolute/Relative"),c.a.createElement(qe,{align:"right"},c.a.createElement("div",{className:e.horizontal},c.a.createElement(j.a,null,"Absolute"),c.a.createElement(Se.a,{theme:Ae},c.a.createElement(ze,{checked:this.state.absrel[0],onChange:this.handleSwitchChange,name:'{"param": "absrel", "positioner": 0}'})),c.a.createElement(j.a,null,"Relative"))),c.a.createElement(qe,{align:"right"},c.a.createElement("div",{className:e.horizontal},c.a.createElement(j.a,null,"Absolute"),c.a.createElement(Se.a,{theme:Ae},c.a.createElement(ze,{checked:this.state.absrel[1],onChange:this.handleSwitchChange,name:'{"param": "absrel", "positioner": 1}'})),c.a.createElement(j.a,null,"Relative")))),c.a.createElement(Te.a,{className:b()(e.row,this.state.type.includes(!1)?null:e.hidden),key:4},c.a.createElement(qe,{component:"th",scope:"row"},"Start")),c.a.createElement(Te.a,{className:b()(e.row,this.state.type.includes(!1)?null:e.hidden),key:5},c.a.createElement(qe,{component:"th",scope:"row"},"Stop")),c.a.createElement(Te.a,{className:b()(e.row,this.state.type.includes(!1)?null:e.hidden),key:6},c.a.createElement(qe,{component:"th",scope:"row"},"Step")),c.a.createElement(Te.a,{className:b()(e.row,this.state.type.includes(!1)?null:e.hidden),key:7},c.a.createElement(qe,{component:"th",scope:"row"},"Number")),c.a.createElement(Te.a,{className:e.row,key:8},c.a.createElement(qe,{component:"th",scope:"row"},"Delay (s)")))))}}]),t}(o.Component),Be=Object(y.a)(function(e){return{root:{display:"flex",flexGrow:1},selectEmpty:{marginTop:2*e.spacing.unit},horizontal:{display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center",padding:"2px"},hidden:{display:"none"}}})(Re),Le=[.1,.5,1,2,5,10,20,30,60,120,"Custom"],Xe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).handleFilename=function(e){a.setState({filename:e.target.value});var t=e.target.value.match(/[-!@#$%^&*()_+|~=`{}\[\]:";'<>?,. \\\/]/g);null!==t?(a.setState({validFilename:!1}),t.forEach(function(e,a){" "===e&&(t[a]="<space>")}),a.setState({invalidFilenameText:"Invalid Characters: "+t.join("")})):a.setState({validFilename:!0,invalidFilenameText:""})},a.handleExpTime=function(e){e.target.value.includes("Custom")?a.setState({customTimeOpen:!0}):a.setState({expTimes:e.target.value})},a.handleImagesShots=function(e){a.setState({numImages:e.target.value})},a.handleDelay=function(e){a.setState({delay:e.target.value})},a.handleDescription=function(e){a.setState({description:e.target.value})},a.handleDeleteTime=function(e){a.setState({expTimes:a.state.expTimes.filter(function(t){return t!==e})})},a.handleCustomTime=function(e){a.setState({customTimeOpen:!1}),Le.includes(e)||(Le.push(e),Le.sort(function(e,t){return"Custom"===e&&(e=1e4),"Custom"===t&&(t=1e4),e-t}))},a.handleAcquire=function(){a.setState({finishDemanded:!1}),a.props.acquire(a.state.filename,a.state.expTimes,a.state.numImages,a.state.delay,a.state.description)},a.handlePause=function(){a.state.pauseDemanded&&(a.props.resume(),a.setState({pauseDemanded:!1})),a.setState({pauseDemanded:!0}),a.props.pause()},a.handleFinish=function(){a.state.finishDemanded&&(a.props.halt(),a.setState({finishDemanded:!1})),a.setState({finishDemanded:!0}),a.props.stop()},a.state={validFilename:!0,invalidFilenameText:"",filename:"",expTimes:[1],description:"",customTimeOpen:!1,numImages:1,delay:0,finishDemanded:!1,pauseDemanded:!1},a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return c.a.createElement(be.a,{container:!0,className:t.root,spacing:2},c.a.createElement(be.a,{item:!0,xs:12},c.a.createElement(be.a,{container:!0,justify:"left",spacing:10},c.a.createElement(be.a,{item:!0},c.a.createElement(U.a,{variant:"contained",onClick:this.handleAcquire,className:b()(t.button,t.acquire)},"Acquire"),c.a.createElement(U.a,{variant:"contained",onClick:this.handlePause,className:b()(t.button,this.state.pauseDemanded?t.resume:t.pause)},this.state.pauseDemanded?"Resume":"Pause"),c.a.createElement(U.a,{variant:"contained",onClick:this.handleFinish,className:b()(t.button,this.state.finishDemanded?t.halt:t.finish)},this.state.finishDemanded?"Halt!!":"Finish")),c.a.createElement(be.a,{item:!0},c.a.createElement(se.a,{htmlFor:"select-exp-time"},"Exp. Time"),c.a.createElement(re.a,{label:"Exp Time",multiple:!0,value:this.state.expTimes,onChange:this.handleExpTime,input:c.a.createElement(le.a,{id:"select-exp-time"}),renderValue:function(a){return c.a.createElement("div",{className:t.chips},a.map(function(a){return c.a.createElement(ie.a,{key:a,label:a,className:t.chip,onDelete:function(){return e.handleDeleteTime(a)},deleteIcon:c.a.createElement(ue.a,null)})}))}},Le.map(function(e){return c.a.createElement(oe.a,{key:e,value:e},e)}))),c.a.createElement(be.a,{item:!0},c.a.createElement($.a,{error:!this.state.validFilename,label:"Filename",variant:"outlined",helperText:this.state.invalidFilenameText,onChange:this.handleFilename,value:this.state.filename})),c.a.createElement(be.a,{item:!0},c.a.createElement($.a,{label:"Number of Images",variant:"outlined",type:"number",inputProps:{min:"1",step:"1"},onChange:this.handleNumImages,value:this.state.numImages})),c.a.createElement(be.a,{item:!0},c.a.createElement($.a,{label:"Delay",variant:"outlined",type:"number",inputProps:{min:"0",step:"1"},onChange:this.handleDelay,value:this.state.delay}))),c.a.createElement(be.a,{item:!0},c.a.createElement($.a,{label:"Description",multiline:!0,rows:"4",fullWidth:!0,defaultValue:"",className:t.textField,margin:"normal",variant:"outlined",onChange:this.handleDescription,value:this.state.description}))),c.a.createElement(Be,null),c.a.createElement(Oe,{onClose:this.handleCustomTime,open:this.state.customTimeOpen}))}}]),t}(o.Component),Ge=Object(r.b)(null,n)(Object(y.a)(function(e){return{root:{display:"flex",flexGrow:1},button:{color:"white",margin:"2px","&:hover":{color:"white"}},acquire:{backgroundColor:he.a[700],"&:hover":{backgroundColor:he.a.A700}},pause:{backgroundColor:de.a[700],"&:hover":{backgroundColor:de.a.A700}},resume:{backgroundColor:de.a[700],"&:hover":{backgroundColor:de.a.A700}},finish:{backgroundColor:ve.a[500],"&:hover":{backgroundColor:ve.a.A400}},halt:{backgroundColor:Ee.a[500],"&:hover":{backgroundColor:Ee.a.A700}},chip:{margin:"2px"}}})(Xe)),Je=Object(C.a)({palette:{type:"dark"}}),Me=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).handleDrawerOpen=function(){a.setState({drawerOpen:!0})},a.handleDrawerClose=function(){a.setState({drawerOpen:!1})},a.handlePageChange=function(e){a.setState({page:e})},a.state={drawerOpen:!1,page:0},a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e,t,a=this,n=this.props.classes,r=this.state,i=r.drawerOpen,l=r.page;return c.a.createElement(w.a,{theme:Je},c.a.createElement("div",{className:n.root},c.a.createElement(O.a,null),c.a.createElement(S.a,{position:"absolute",className:b()(n.appBar,Object(g.a)({},n.appBarShift,i))},c.a.createElement(k.a,{disableGutters:!i},c.a.createElement(N.a,{color:"inherit","aria-label":"Menu",onClick:this.handleDrawerOpen,className:b()(n.menuButton,Object(g.a)({},n.hide,i))},c.a.createElement(T.a,null)),c.a.createElement(j.a,{variant:"h6",color:"inherit"},"SAXS"))),c.a.createElement(D.a,{variant:"permanent",anchor:"left",open:i,className:b()(n.drawer,(e={},Object(g.a)(e,n.drawerOpen,i),Object(g.a)(e,n.drawerClose,!i),e)),classes:{paper:b()((t={},Object(g.a)(t,n.drawerOpen,i),Object(g.a)(t,n.drawerClose,!i),t))}},c.a.createElement("div",{className:n.toolbar},c.a.createElement(N.a,{onClick:this.handleDrawerClose},c.a.createElement(I.a,null))),c.a.createElement(_.a,null),c.a.createElement(A.a,null,[["Acquisition",c.a.createElement(J.a,null)],["New Experiment",c.a.createElement(B.a,null)],["BL Setup",c.a.createElement(X.a,null)]].map(function(e,t){return c.a.createElement(z.a,{button:!0,key:e[0],onClick:function(){return a.handlePageChange(t)}},c.a.createElement(q.a,null,e[1]),c.a.createElement(P.a,{primary:e[0]}))})),c.a.createElement(_.a,null)),c.a.createElement("main",{className:n.content},c.a.createElement("div",{className:n.toolbar}),0===l&&c.a.createElement("div",null,c.a.createElement(Ge,null)),2===l&&c.a.createElement("div",null,c.a.createElement(K,{size:"7"})," "))))}}]),t}(o.Component),Ve=Object(y.a)(function(e){return{root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginLeft:12,marginRight:36},hide:{display:"none"},drawer:{width:240,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:Object(g.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:7*e.spacing.unit+1},e.breakpoints.up("sm"),{width:9*e.spacing.unit+1}),toolbar:Object(E.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),content:{flexGrow:1,padding:3*e.spacing.unit}}})(Me),We=a(37),Ue={server_version:null,client_version:"0.0.1"},$e=Object(We.c)({acquire:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"version":return Object(E.a)({},e,{server_version:t.data});default:return console.log(t.data),e}}}),He=function(e){return function(e){return function(t){(t.local||t.fromServer)&&e(t)}}};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(138);var Ke=function(e){var t=[];void 0!==e&&(t.push(function(e){return function(t){return function(t){return function(a){a.local||a.fromServer||e.send(JSON.stringify(a)),t(a)}}}}(e)),t.push(He));var a=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||We.d;return Object(We.e)($e,a(We.a.apply(void 0,t)))}(s);s.onopen=function(){Ke.dispatch(Z())},s.onclose=function(){console.log("closed")},s.onmessage=function(e){Ke.dispatch(Y(e.data))},m.a.render(c.a.createElement(r.a,{store:Ke},c.a.createElement(Ve,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[116,1,2]]]);
//# sourceMappingURL=main.a3e049d7.chunk.js.map